Index: lib/db.lib.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nfunction connectDB()\r\n{ $db = new mysqli(\"localhost\", \"zeitkonto\", \"zeitkonto\", \"zeitkonto\");\r\n  if ($db -> connect_errno)\r\n  { echo \"Failed to connect to MySQL: \" . $db->connect_error;\r\n    exit();\r\n  }\r\n  return ($db);\r\n}\r\n\r\nfunction getArbeitszeitlisteDB($db, $dozentKurz, $jahr, $semester )\r\n{  $arbeitszeitliste = array();\r\n   $saldoTotal = 0;\r\n   $sql1   = \"SELECT DISTINCT  Jahr, Semester  FROM `beteiligung` WHERE  DozentKurz = \\\"\". $dozentKurz\r\n        . \"\\\"  ORDER by Jahr ASC, Semester ASC \";\r\n\r\n   $result = $db -> query( $sql1 );\r\n   $row    = $result -> fetch_all( MYSQLI_ASSOC );\r\n\r\n   $arbeitszeitliste[ 'aktuell' ][ \"saldo\"    ] = 0;\r\n   $arbeitszeitliste[ 'aktuell' ][ \"Semester\" ] = 0;\r\n   $arbeitszeitliste[ 'aktuell' ][ \"Jahr\"     ] = 0;\r\n\r\n   foreach ( $row as $r1 )\r\n   {  $sb =  renderStundenbilanz( $db, $dozentKurz, $r1['Jahr'], $r1['Semester'], true);\r\n      $arbeitszeitliste[ 'aktuell' ] =  $sb[ 'dozentLV' ];\r\n      $arbeitszeitliste[ $r1[ 'Jahr' ]. $r1[ 'Semester' ]  ] =  $sb;\r\n      $saldoTotal +=  $arbeitszeitliste[ $r1[ 'Jahr' ]. $r1[ 'Semester' ]  ] [ 'dozentLV' ][ \"saldo\" ];\r\n      $arbeitszeitliste[ $r1[ 'Jahr' ]. $r1[ 'Semester' ]  ] [ 'dozentLV' ][ \"saldoTotal\" ] = $saldoTotal;\r\n   }\r\n\r\n   $arbeitszeitliste[ 'aktuell' ][ \"saldoTotal\" ] = $saldoTotal;\r\n   $arbeitszeitliste[ 'aktuell' ] +=  getDozentDB( $db, $dozentKurz ) ;\r\n\r\n   return $arbeitszeitliste;\r\n}\r\n\r\nfunction getVeranstaltungslisteDB( $db, $dozentKurz, $jahr, $semester )\r\n{ $sql1   = \"SELECT * FROM `beteiligung` WHERE Jahr     = \\\"\" . $jahr\r\n                                   . \"\\\" AND DozentKurz = \\\"\". $dozentKurz\r\n                                   . \"\\\" AND Semester   = \\\"\". $semester\r\n                                   . \"\\\" ORDER BY Fach\";\r\n  \r\n  $result = $db -> query( $sql1 );\r\n  $row    = $result -> fetch_all( MYSQLI_ASSOC );\r\n\r\n  $veranstaltungsliste = array();\r\n  foreach ( $row as $r1 )\r\n\r\n  { $veranstaltungsliste[] =  getVeranstaltungDB( $db, $r1, $jahr, $semester );\r\n  }\r\n\r\n #deb(sizeof($veranstaltungsliste));\r\n  return $veranstaltungsliste;\r\n}\r\n\r\nfunction getVeranstaltungDB($db, $r1, $jahr, $semester )\r\n{  #  deb($r1,1);\r\n     $sql2 = \"SELECT * FROM `lva`  WHERE Jahr       = \\\"\" . $jahr\r\n        . \"\\\"  AND Semester     = \\\"\" . $semester\r\n        . \"\\\"  AND Studiengang  = \\\"\" . $r1[ 'Studiengang' ]\r\n        . \"\\\"  AND FachKurz     = \\\"\" . $r1[ 'Fach'        ]  .\"\\\"\";\r\n\r\n    $result2 = $db -> query( $sql2 );\r\n    $row2    = $result2 -> fetch_all( MYSQLI_ASSOC );\r\n    $r1[ 'SWS' ] = $row2[ 0 ][ \"SWS\" ];\r\n\r\n    $sql3 = \"SELECT * FROM `Fach`  WHERE Kurz       = \\\"\" .  $r1[ 'Fach'        ]  .\"\\\"\";\r\n    $result3 = $db -> query($sql3);\r\n    $row3 = $result3 -> fetch_all( MYSQLI_ASSOC );\r\n\r\n    $r1[ 'FachL'  ] = $row3[ 0 ][ \"Name\" ];\r\n    $r1[ 'LVS'    ] = $r1[ 'K' ] *  $r1[ 'SWS' ]    ;\r\n    $r1[ 'Anteil' ] = ( int ) ( $r1[ 'K' ] * 100 ) ;\r\n\r\n    return  $r1;\r\n\r\n}\r\n\r\nfunction getEntlastungslisteDB($db, $dozentKurz, $jahr, $semester)\r\n{\r\n  $sql5   = \"SELECT * FROM `auslastungsgrund`  ORDER BY Grund\";\r\n  $result = $db -> query( $sql5 );\r\n  $row    = $result -> fetch_all( MYSQLI_ASSOC );\r\n  \r\n  foreach ( $row as $r2 )\r\n  { $auslastung[ $r2[ 'Grund' ] ] = $r2[ 'Text' ];\r\n  }\r\n  \r\n  $sql4 = \"SELECT * FROM `auslastung` WHERE Jahr =     \\\"\" . $jahr\r\n                                . \"\\\" AND DozentKurz = \\\"\" . $dozentKurz\r\n                                . \"\\\" AND Semester =   \\\"\" . $semester\r\n                                . \"\\\" ORDER BY Grund\";\r\n  $result = $db -> query( $sql4 );\r\n\r\n  $row = $result -> fetch_all( MYSQLI_ASSOC );\r\n  $entlastungsliste = array();\r\n  foreach ($row as $r3)\r\n  {  $r3[ 'auslastungsGrund' ] = $auslastung[ $r3[ 'Grund' ] ];\r\n     $entlastungsliste[] =  $r3;\r\n  }\r\n  return $entlastungsliste;\r\n}\r\n\r\n\r\nfunction getBeteiligungslisteDB($db, $veranstaltungsliste )\r\n{\r\n  $beteiligungsliste = array();\r\n\r\n  foreach ($veranstaltungsliste as $veranstaltung )\r\n  {\r\n    #if ($veranstaltung ['K'] < 1)\r\n    { $beteiligungsliste[] = getBeteiligungDB( $db, $veranstaltung );\r\n    }\r\n\r\n  }\r\n    return $beteiligungsliste;\r\n}\r\n\r\n\r\n\r\nfunction getBeteiligungDB($db, $veranstaltung )\r\n{\r\n    $beteiligungAlle = array();\r\n\r\n  #  SELECT * FROM `fach` ORDER BY Name  ASC , Name  \";\r\n\r\n    $sql6 = \" SELECT * FROM beteiligung WHERE Fach = \\\"\".$veranstaltung['Fach'].\"\\\" AND Studiengang = \\\"\" . $veranstaltung['Studiengang'] . \"\\\"  AND Jahr = \\\"\".$veranstaltung ['Jahr']. \"\\\" AND Semester = \\\"\".$veranstaltung['Semester'].\"\\\" ORDER BY DozentKurz ASC;\";\r\n\r\n\r\n    $result = $db -> query($sql6);\r\n\r\n    $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n\r\n    foreach ($row as $beteiligung)\r\n    {\r\n\r\n        $beteiligung['dozent']   =  getDozentDB($db,$beteiligung['DozentKurz'] ) ;\r\n\r\n        $beteiligungAlle[] =   getVeranstaltungDB($db, $beteiligung, $beteiligung['Jahr'], $beteiligung['Semester']);\r\n    }\r\n\r\n    return $beteiligungAlle;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction getFaecherListeDB($db )\r\n{\r\n  $faecherliste = array();\r\n  $sql6 = \"SELECT * FROM `fach` ORDER BY Name  ASC , Name  \";\r\n  $result = $db -> query($sql6);\r\n  \r\n  $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n  \r\n  foreach ($row as $r4)\r\n  {  $faecherliste[] = $r4;\r\n  }\r\n\r\n  return $faecherliste;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getStudiengangListeDB($db )\r\n{\r\n  $studiengangliste = array();\r\n  $sql6 = \"SELECT * FROM `studiengang` ORDER BY Name  ASC , Name  \";\r\n  $result = $db -> query($sql6);\r\n  \r\n  $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n  \r\n  foreach ($row as $r4)\r\n  {  $studiengangliste[] = $r4;\r\n  }\r\n  \r\n  return $studiengangliste;\r\n}\r\n\r\n\r\n\r\nfunction getDepartmentListeDB($db )\r\n{\r\n  $departmentliste = array();\r\n  $sql6 = \"SELECT * FROM `department` ORDER BY Name  ASC , Name  \";\r\n  $result = $db -> query($sql6);\r\n  \r\n  $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n  \r\n  foreach ($row as $r4)\r\n  {  $departmentliste[] = $r4;\r\n  }\r\n  \r\n  return $departmentliste;\r\n}\r\n\r\n\r\n\r\nfunction getDozentenListeDB($db )\r\n{\r\n  \r\n  $dozentenliste = array();\r\n  \r\n  $sql6 = \"SELECT * FROM `dozent` ORDER BY Name  \";\r\n  $result = $db -> query($sql6);\r\n  \r\n  $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n  \r\n  foreach ($row as $r4)\r\n  {\r\n    $r4[ 'Anrede' ] = setAnrede( $r4 );\r\n    $dozentenliste[] = $r4;\r\n  }\r\n \r\n  return $dozentenliste;\r\n}\r\n\r\nfunction getDozentenListeSemDB( $db )\r\n{ $jahr     =  $_SESSION[ 'aktuell' ][ 'Jahr'     ] ;\r\n  $semester =  $_SESSION[ 'aktuell' ][ 'Semester' ] ;\r\n  \r\n  $dozentenliste = array();\r\n  \r\n  $sql6 = \"SELECT * FROM `dozent` ORDER BY Status DESC, Name  \";\r\n  $result = $db -> query( $sql6 );\r\n  \r\n  $row = $result -> fetch_all( MYSQLI_ASSOC );\r\n  \r\n  foreach ($row as $r4)\r\n  {\r\n    $r4[ 'AnzV'   ] = sizeof( getVeranstaltungslisteDB( $db, $r4[ 'Kurz' ], $jahr, $semester ) );\r\n\r\n    $r4[ 'AnzE'   ] = sizeof( getEntlastungslisteDB(    $db, $r4[ 'Kurz' ], $jahr, $semester ) );\r\n    $r4[ 'Anrede' ] = setAnrede( $r4 );\r\n\r\n    $r4[ 'aktuell' ] =   getArbeitszeitlisteDB( $db, $r4[ 'Kurz' ], $jahr, $semester )[ 'aktuell' ];   ;\r\n\r\n    if ($r4[ 'AnzV'   ] > 0 OR   $r4[ 'AnzE'   ] > 0 )   # Liste 1: Dozenten mit Lehre oder Entlastung\r\n    {  $tmpListe1[] = $r4;}\r\n    else\r\n    {  $tmpListe2[] = $r4;}                                # Liste  2: Dozenten ohne Lehre und ohne Entlastung\r\n  }\r\n  foreach ( $tmpListe2 as $tl2 )\r\n  { $tmpListe1[] = $tl2;                                 # Liste 2 wird an die Liste 1 angehängt\r\n  }\r\n  $dozentenliste = $tmpListe1;\r\n\r\n  return $dozentenliste;\r\n}\r\n\r\n\r\nfunction setAnrede($dozent)\r\n{ if( $dozent [ 'Geschlecht' ] == 'm')\r\n  {   $a = 'Sehr geehrter Herr ';\r\n      if ( $dozent [ 'Status' ] == 'Prof' )\r\n      {  $a = 'Lieber Kollege';\r\n      }\r\n  }\r\n  \r\n  else {   $a = 'Sehr geehrte Frau ';\r\n    if ( $dozent [ 'Status' ] == 'Prof' )\r\n    {  $a = 'Liebe Kollegin';\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nfunction getDozentDB($db, $dozentKurz)\r\n{ $sql6 = \"SELECT * FROM `dozent` WHERE  Kurz =\\\"\". $dozentKurz .\"\\\"\";\r\n  $result = $db -> query($sql6);\r\n  \r\n  $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n  \r\n  foreach ($row as $r4)\r\n  {  $dozent = $r4;\r\n  }\r\n  return $dozent;\r\n}\r\n\r\n\r\nfunction getDozentLVDB($db, $dozentKurz, $jahr, $semester)\r\n{  $sql7 = \"SELECT * FROM `lehrverpflichtung` WHERE Jahr = \\\"\" . $jahr . \"\\\" AND DozKurz = \\\"\". $dozentKurz .\"\\\"  AND Semester = \\\"\". $semester .\"\\\"\";\r\n   $result = $db -> query($sql7);\r\n   $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n\r\n  foreach ($row as $r7)\r\n  {\r\n    $dozentLV = $r7;\r\n  }\r\n\r\n\r\n  if ( !isset( $dozentLV [ 'DozKurz'        ] ) ) { $dozentLV [ 'DozKurz'        ] = $dozentKurz ;}\r\n  if ( !isset( $dozentLV [ 'Status'         ] ) ) { $dozentLV [ 'Status'         ] = null        ;}\r\n  if ( !isset( $dozentLV [ 'Professur'      ] ) ) { $dozentLV [ 'Professur'      ] = null        ;}\r\n  if ( !isset( $dozentLV [ 'Jahr'           ] ) ) { $dozentLV [ 'Jahr'           ] = 0           ;}\r\n  if ( !isset( $dozentLV [ 'Semester'       ] ) ) { $dozentLV [ 'Semester'       ] = 0           ;}\r\n  if ( !isset( $dozentLV [ 'Pflicht'        ] ) ) { $dozentLV [ 'Pflicht'        ] = 0           ;}\r\n  if ( !isset( $dozentLV [ 'Kommentar'      ] ) ) { $dozentLV [ 'Kommentar'      ] = ''          ;}\r\n  if ( !isset( $dozentLV [ 'Abfrage'        ] ) ) { $dozentLV [ 'Abfrage'        ] = null        ;}\r\n  if ( !isset( $dozentLV [ 'grundfinanziert'] ) ) { $dozentLV [ 'grundfinanziert'] = null        ;}\r\n\r\n  return $dozentLV;\r\n}\r\n\r\n\r\nfunction getFaecherListeForLiveSeachDB( )\r\n{\r\n    $db = connectDB();\r\n    $faecherliste = array();\r\n    $sql6 = \"SELECT * FROM `fach` ORDER BY Name  ASC , Name  \";\r\n    $result = $db -> query($sql6);\r\n\r\n    $row = $result -> fetch_all(MYSQLI_ASSOC);\r\n\r\n    foreach ($row as $r4)\r\n    {  $faecherliste[] = $r4;\r\n    }\r\n\r\n    return $faecherliste;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/db.lib.php b/lib/db.lib.php
--- a/lib/db.lib.php	(revision 2e8721c4603c05242172d3e00f7e30644d1f797e)
+++ b/lib/db.lib.php	(date 1737023693530)
@@ -23,7 +23,7 @@
    $arbeitszeitliste[ 'aktuell' ][ "Jahr"     ] = 0;
 
    foreach ( $row as $r1 )
-   {  $sb =  renderStundenbilanz( $db, $dozentKurz, $r1['Jahr'], $r1['Semester'], true);
+   { $sb =  renderStundenbilanz( $db, $dozentKurz, $r1['Jahr'], $r1['Semester'], true);
       $arbeitszeitliste[ 'aktuell' ] =  $sb[ 'dozentLV' ];
       $arbeitszeitliste[ $r1[ 'Jahr' ]. $r1[ 'Semester' ]  ] =  $sb;
       $saldoTotal +=  $arbeitszeitliste[ $r1[ 'Jahr' ]. $r1[ 'Semester' ]  ] [ 'dozentLV' ][ "saldo" ];
@@ -50,8 +50,6 @@
 
   { $veranstaltungsliste[] =  getVeranstaltungDB( $db, $r1, $jahr, $semester );
   }
-
- #deb(sizeof($veranstaltungsliste));
   return $veranstaltungsliste;
 }
 
@@ -224,7 +222,7 @@
 function getDozentenListeSemDB( $db )
 { $jahr     =  $_SESSION[ 'aktuell' ][ 'Jahr'     ] ;
   $semester =  $_SESSION[ 'aktuell' ][ 'Semester' ] ;
-  
+
   $dozentenliste = array();
   
   $sql6 = "SELECT * FROM `dozent` ORDER BY Status DESC, Name  ";
@@ -235,7 +233,6 @@
   foreach ($row as $r4)
   {
     $r4[ 'AnzV'   ] = sizeof( getVeranstaltungslisteDB( $db, $r4[ 'Kurz' ], $jahr, $semester ) );
-
     $r4[ 'AnzE'   ] = sizeof( getEntlastungslisteDB(    $db, $r4[ 'Kurz' ], $jahr, $semester ) );
     $r4[ 'Anrede' ] = setAnrede( $r4 );
 
@@ -250,7 +247,7 @@
   { $tmpListe1[] = $tl2;                                 # Liste 2 wird an die Liste 1 angehängt
   }
   $dozentenliste = $tmpListe1;
-
+  #  deb($dozentenliste,1 );
   return $dozentenliste;
 }
 
Index: lib/render.lib.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nfunction renderFaecherListe( $db )\r\n{ $faecherliste = getFaecherListeDB( $db );\r\n  \r\n  $r = '<table  style=\"width: 100%;   position: relative;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px; position: sticky; top: 0;\">\r\n              <th  style=\"width: 20%;\" class=\"taC head\" > Kurz      </th>\r\n              <th  style=\"width: 50%;\" class=\"taC head\" > Name      </th>\r\n              <th  style=\"width: 10%;\" class=\"taC head\" > Typ       </th>\r\n              <th  style=\"width: 20%;\" class=\"taC head\" > Kommentar </th>\r\n              </tr> ' ;\r\n  \r\n  foreach ( $faecherliste  as $fl )\r\n  { $r .= '<tr>\r\n                 <td class=\"taC\">' . $fl[ \"Kurz\"      ] . ' </td>\r\n                 <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'fach\\'  , \\'Name\\'       ,  this , \\'Kurz\\'  ,  \\''.  $fl[ \"Kurz\"  ]. '\\'   ); \" >' . $fl[ \"Name\"       ]  . '</td>\r\n                 <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'fach\\'  , \\'Typ\\'        ,  this , \\'Kurz\\'  ,  \\''.  $fl[ \"Kurz\"  ]. '\\'   ); \" >' . $fl[ \"Typ\"        ]  . '</td>\r\n                 <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'fach\\'  , \\'Kommentar\\'  ,  this , \\'Kurz\\'  ,  \\''.  $fl[ \"Kurz\"  ]. '\\'   ); \" >' . $fl[ \"Kommentar\"  ]  . '</td>\r\n</tr>';\r\n  }\r\n  $r .= '</table>';\r\n  mysqli_close($db);\r\n  return $r;\r\n}\r\n\r\nfunction renderStudiengangListe( $db )\r\n{ $studiengangliste = getStudiengangListeDB( $db );\r\n  \r\n  $r = '<table   style=\"width: 100%;   position: relative;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px; position: sticky; top: 0;\">\r\n          <th  style=\"width: 25%;\" class=\"taC head\" > Kurz      </th>\r\n          <th  style=\"width: 50%;\" class=\"taC head\" > Name      </th>\r\n          <th  style=\"width: 25%;\" class=\"taC head\" > DepKurz      </th>\r\n         </tr> ' ;\r\n  \r\n  foreach ( $studiengangliste  as $dl )\r\n  { $r .= '<tr>\r\n             <td class=\"taC\"   >' . $dl[ \"Kurz\"      ] . ' </td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'studiengang\\'  , \\'Name\\'  ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'           );   \" >' . $dl[ \"Name\"  ]    .  '</td>\r\n             <td class=\"taC\"   >' . $dl[ \"DepKurz\"      ] . ' </td>\r\n           </tr>';\r\n  }\r\n  $r .= '</table>';\r\n  mysqli_close($db);\r\n  return $r;\r\n}\r\n\r\nfunction renderDepartmentListe( $db )\r\n{ $departmentliste = getDepartmentListeDB( $db );\r\n  \r\n  $r = '<table   style=\"width: 100%;   position: relative;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px; position: sticky; top: 0;\">\r\n          <th  style=\"width: 50%;\" class=\"taC head\" > Kurz      </th>\r\n          <th  style=\"width: 50%;\" class=\"taC head\" > Name      </th>\r\n         </tr> ' ;\r\n  \r\n  foreach ( $departmentliste  as $dl )\r\n  { $r .= '<tr>\r\n             <td class=\"taC\">' . $dl[ \"Kurz\"      ] . ' </td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'department\\'  , \\'Name\\'       ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'   ); \" >' . $dl[ \"Name\"       ]  . '</td>\r\n            </tr>';\r\n  }\r\n    $r .= '</table>';\r\n  mysqli_close($db);\r\n  return $r;\r\n}\r\n\r\nfunction renderDozentenListe( $db )\r\n{ $dozentenliste   = getDozentenListeDB( $db );\r\n  \r\n  $r = '<table   style=\"width: 100%;   position: relative;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px; position: sticky; top: 0;\">\r\n          <th  style=\"width: 5%\"                  > Kurz    </th>\r\n          <th  style=\"width: 10%;\" class=\"taC head\" > Vorname </th>\r\n          <th  style=\"width: 15%;\" class=\"taC head\" > Name    </th>\r\n          <th  style=\"width: 10%;\" class=\"taC head\" > Ges     </th>\r\n          <th  style=\"width: 10%;\" class=\"taC head\" > Status  </th>\r\n          <th  style=\"width: 15%;\" class=\"taC head\" > Mail    </th>\r\n          <th  style=\"width: 5%; \" class=\"taC head\" > Zust.   </th>\r\n          <th  style=\"width: 5%;\" class=\"taC head\" > Pflicht </th>\r\n         </tr> ' ;\r\n \r\n  foreach ( $dozentenliste  as $dl )\r\n  { $r .= '<tr>\r\n             <td class=\"taL\">' . $dl[ \"Kurz\" ] . ' </td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Vorname\\'         ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'    );   \" >' . $dl[ \"Vorname\"                     ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Name\\'            ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'    );   \" >' . $dl[ \"Name\"                        ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Geschlecht\\'      ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'    );   \" >' . $dl[ \"Geschlecht\"                  ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Status\\'          ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'    );   \" >' . $dl[ \"Status\"                      ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Mailadresse\\'     ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\'    );   \" >' . $dl[ \"Mailadresse\"                 ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Mailzustellung\\'  ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\', 0 );   \" >' . $dl[ \"Mailzustellung\"              ] .  '</td>\r\n             <td class=\"taL\" onClick = \"me( this );\" oninput = \"setV2DB(  \\'dozent\\'  , \\'Pflicht_weg\\'     ,  this , \\'Kurz\\'  ,  \\''.  $dl[ \"Kurz\"  ]. '\\', 0 );   \" >' .  number_format( $dl[ \"Pflicht_weg\" ], 2 ) .  '</td>\r\n            </tr>';\r\n  }\r\n    $r .= '</table>';\r\n  mysqli_close($db);\r\n  return $r;\r\n}\r\n\r\nfunction renderDozentenListeSem( $db )\r\n{ $dozentenliste   = getDozentenListeSemDB( $db );\r\n\r\n  $r = '<table   style=\"width: 100%;   position: relative;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px; position: sticky; top: 0;\">' ;\r\n  $r .='<th  style=\"width: 5% ;\"                  > Kurz     </th>' ;\r\n  $r .='<th  style=\"width: 10%;\" class=\"taC head\" > Vorname  </th>' ;\r\n  $r .='<th  style=\"width: 15%;\" class=\"taC head\" > Name     </th>' ;\r\n  $r .='<th  style=\"width: 5% ;\" class=\"taC head\" > Status   </th>' ;\r\n  $r .='<th  style=\"width: 5% ;\" class=\"taC head\" > Pflicht  </th>' ;\r\n  $r .='<th  style=\"width: 5% ;\"                  > L:E      </th>' ;\r\n  $r .='<th  style=\"width: 5% ;\"                  > Konto    </th>' ;\r\n  $r .='<th  style=\"width: 5% ;\"                  > Bilanz   </th>' ;\r\n  $r .='</tr> ' ;\r\n  \r\n  foreach ( $dozentenliste  as $dl )\r\n  { $r .= '<tr>';\r\n    $r .= '<td class=\"taL\">' . $dl[ \"Kurz\"    ] . '</td>';\r\n    $r .= '<td class=\"taC\">' . $dl[ \"Vorname\" ] . '</td>';\r\n    $r .= '<td class=\"taC\">' . $dl[ \"Name\"    ] . '</td>';\r\n    $r .= '<td class=\"taC\">' . $dl[ \"Status\"         ] . '</td>';\r\n    $r .= '<td class=\"taC\">' . number_format( $dl[ \"Pflicht_weg\" ], 2 ) . '</td>';\r\n    $r .= '<td class=\"taC\">';\r\n    $r .= '<span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center; padding: 3px;\">' . $dl[ \"AnzV\" ] . '</span>:';\r\n    $r .= '<span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center; padding: 3px;\">' . $dl[ \"AnzE\" ] . '</span>';         $r .= '</td>';\r\n    $r .= '<td class=\"taR\"><a style=\"text-decoration: none;\"  target=\"rechts\" href=\"?action=sb&jahr='   . $_SESSION[ 'aktuell' ][ \"Jahr\" ] . '&semester=' . $_SESSION[ 'aktuell' ][ 'Semester' ]  . '&dozentKurz=' . $dl[ \"Kurz\" ] . '&output=html\"><span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center;\">' .  number_format(  $dl['aktuell']['saldo'     ]  ,2 ) . '</span></a> <a style=\"text-decoration: none;\"  target=\"rechts\" href=\"?action=sb&jahr='   . $_SESSION[ 'aktuell' ][ \"Jahr\" ] . '&semester=' . $_SESSION[ 'aktuell' ][ 'Semester' ]  . '&dozentKurz=' . $dl[ \"Kurz\" ] . '&output=pdf\" ><span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center;\">p</span></a> </td>';\r\n    $r .= '<td class=\"taR\"><a style=\"text-decoration: none;\"  target=\"rechts\" href=\"?action=azkt&jahr=' . $_SESSION[ 'aktuell' ][ \"Jahr\" ] . '&semester=' . $_SESSION[ 'aktuell' ][ 'Semester' ]  . '&dozentKurz=' . $dl[ \"Kurz\" ] . '&output=html\"><span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center;\">' .  number_format(  $dl['aktuell']['saldoTotal']  ,2 ) . '</span></a> <a style=\"text-decoration: none;\"  target=\"rechts\" href=\"?action=azkt&jahr=' . $_SESSION[ 'aktuell' ][ \"Jahr\" ] . '&semester=' . $_SESSION[ 'aktuell' ][ 'Semester' ]  . '&dozentKurz=' . $dl[ \"Kurz\" ] . '&output=pdf\" ><span style=\"width:100%; height:100%; background-color:#EEEEEE; text-decoration: none; text-align: center;\">p</span></a>  </td>';\r\n    $r .= '</tr>';\r\n  }\r\n  $r .= '</table>';\r\n  mysqli_close($db);\r\n  \r\n  return $r;\r\n}\r\n\r\nfunction renderArbeitszeitkonto( $db, $dozentKurz, $jahr, $semester )\r\n{ $arbeitszeitliste =  getArbeitszeitlisteDB( $db, $dozentKurz, $jahr, $semester );\r\n  mysqli_close($db);\r\n  return renderZeitkontoTotalProf( $arbeitszeitliste );\r\n}\r\n\r\nfunction renderStundenbilanz( $db, $dozentKurz, $jahr, $semester, $onlyData = false )\r\n{ $dozent   = getDozentDB( $db, $dozentKurz );\r\n  $dozent[ 'aktuell' ][ 'veranstaltungsliste' ]  =  getVeranstaltungslisteDB( $db, $dozentKurz, $jahr, $semester );\r\n  $dozent[ 'aktuell' ][ 'entlastungsliste'    ]  =  getEntlastungslisteDB(    $db, $dozentKurz, $jahr, $semester );\r\n  $dozent[ 'aktuell' ][ 'beteiligung'         ]  =  getBeteiligungslisteDB( $db,  $dozent[ 'aktuell' ][ 'veranstaltungsliste' ] );\r\n  $dozent[ 'aktuell' ][ 'dozentLV'            ]  =  getDozentLVDB( $db, $dozentKurz, $jahr, $semester );\r\n  $dozent[ 'aktuell' ][ 'dozentLV'            ] +=  calcStundenbilanz( $dozent );\r\n\r\n  #mysqli_close($db);\r\n\r\n  if ( $onlyData )\r\n  { $stundenbilanz = $dozent['aktuell'];\r\n  }\r\n\r\n  else\r\n  { $stundenbilanz = renderZeitkontoProf( $dozent );\r\n  }\r\n  return $stundenbilanz;\r\n}\r\n\r\nfunction calcStundenbilanz($dozent)\r\n{ $stunden = array();\r\n  $stunden[ 'veranstaltungssumme' ] = 0;\r\n  $stunden[ 'entlastungsumme'     ] = 0;\r\n  $stunden[ 'saldo'               ] = 0;\r\n\r\n  foreach ($dozent['aktuell']['veranstaltungsliste'] as $vl )\r\n  { $stunden[ 'veranstaltungssumme' ]  += $vl['LVS'];\r\n  }\r\n  \r\n  foreach ($dozent['aktuell']['entlastungsliste'] as $vl )\r\n  {  $stunden[ 'entlastungsumme' ]  += $vl['LVS'];\r\n  }\r\n\r\n  $stunden[ 'summeLuE' ] = $stunden[ 'entlastungsumme' ]  +  $stunden[ 'veranstaltungssumme' ];\r\n  $stunden[ 'saldo'    ] = $stunden[ 'entlastungsumme' ]  +  $stunden[ 'veranstaltungssumme' ] - $dozent[ 'aktuell']['dozentLV'][ 'Pflicht' ];\r\n\r\n  return $stunden;\r\n}\r\n\r\nfunction renderZeitkontoProf($dozent)\r\n{\r\n  $html = '\r\n<table>\r\n\t<tr> <td style=\"border-bottom: 0 solid white;\" >\t<br /> <div class=\"headertxt\">Hochschule für Angewandte Wissenschaften<br/>Fakultät Life Sciences<br/>Dekanat</div>   </td>\r\n       <td style=\"text-align: right ; border-bottom: 0 solid white; \">  <img width=\"200px;\" alt=\"haw-logo\"   src=\"img/HAW_Marke_grau_RGB.png\"  ><br>' .  date(\"d.m.Y\")  .' </td>\r\n\t</tr>\r\n\t\r\n</table>\r\n  <div class=\"betrefftxt\" >aktuelle Stundenbilanz für das Semester '. $dozent[\"aktuell\"][\"dozentLV\"][\"Semester\"]  .' '  . $dozent[\"aktuell\"][\"dozentLV\"][\"Jahr\"]  .'   </div>';\r\n\r\n$html .=  '<div class=\"fliestxt\" >' .$dozent[\"Anrede\"].' '.$dozent[\"Name\"].', <br/><br/> hiermit erhalten Sie die aktuelle Stundenbilanz für das zurückliegende Semester.</div><br/>' ;\r\n$html .= '<table   style=\"width: 100%;\"  >\r\n<tr style=\"background-color: #cccccc;\"   >\r\n<td style=\"width: 90%\"                   > </td>\r\n<td style=\"width: 10%;\" class=\"taC head\" > LVS </td></tr>\r\n<tr><td class=\"taL sum\">Summe der Lehrveranstaltungen und Entlastungen:</td><td class=\"taC sum\" >'.  number_format( $dozent[ \"aktuell\" ][ \"dozentLV\" ][ 'summeLuE' ] , 2 ) .'</td></tr>\r\n<tr><td class=\"taL\"    >Ihre Lehrverpflichtung:                        </td><td class=\"taC\"     >'.  number_format( $dozent[ \"aktuell\" ][ \"dozentLV\" ][ 'Pflicht'  ] , 2 ) .'</td></tr>\r\n<tr><td class=\"taL sal\">Ihr Saldo im Semester '. $dozent[\"aktuell\"][\"dozentLV\"][\"Semester\"]  .' '  . $dozent[\"aktuell\"][\"dozentLV\"][\"Jahr\"]  .' beträgt:      </td><td class=\"taC sal\" >'.  number_format( $dozent[ \"aktuell\" ][ \"dozentLV\" ][ 'saldo'    ] , 2 ) .'</td></tr>\r\n</table>';\r\n  \r\n$html .=  '<br/><div class=\"fliestxt\"> Wir haben im Einzelnen für Sie folgende Leistungen notiert:</div><br/>';\r\n$html .=  generateLuETable( $dozent );\r\n$html .=  '<div class=\"fliestxt\"><br/>\r\nIhr Überstundenkonto der letzten Jahre oder Ihr Arbeitszeitkonto wird Ihnen gesondert zugestellt.<br/>\r\nFür weitere Fragen stehe ich Ihnen gerne zur Verfügung.<br/><br/>\r\nMit freundlichen Grüßen<br/>\r\nMartin Holle, Prodekan LS\r\n</div>';\r\n  \r\n$html .=  '<img width=\"300px;\" alt=\"sign-holle\" src=\"img/sign-holle.png\">';\r\n$html .=  generateBeteiligung( $dozent );\r\n\r\nreturn $html;\r\n}\r\n\r\nfunction renderZeitkontoTotalProf($arbeitszeitliste)\r\n{\r\n$html = '\r\n<table>\r\n\t<tr> <td style=\"border-bottom: 0 solid white;\" >\t<br /> <div class=\"headertxt\">Hochschule für Angewandte Wissenschaften<br/>Fakultät Life Sciences<br/>Dekanat</div>   </td>\r\n       <td style=\"text-align: right ; border-bottom: 0 solid white; \">  <img width=\"200px;\" alt=\"haw-logo\"   src=\"img/HAW_Marke_grau_RGB.png\"  ><br>' .  date(\"d.m.Y\")  .' </td>\r\n\t</tr>\r\n\t\r\n</table>\r\n  <div class=\"betrefftxt\" >aktueller Stand des Arbeitszeitkontos für das Semester '. $arbeitszeitliste[\"aktuell\"][\"Semester\"]  .' '  . $arbeitszeitliste[\"aktuell\"][\"Jahr\"]  .'   </div>';\r\n    $html .=  '<div class=\"fliestxt\" >' .$arbeitszeitliste[\"aktuell\"][\"Anrede\"].' '.$arbeitszeitliste[\"aktuell\"][\"Name\"].', <br/><br/> hiermit erhalten Sie den aktuellen Stand Ihres Zeitkontos für das zurückliegende Semester.</div><br/>' ;\r\n    $html .=  generateAZKTTable( $arbeitszeitliste );\r\n    $html .=  '<br/><div class=\"fliestxt\">Der aktuelle Stand Ihres Arbeitszeitkontos beträgt  '.$arbeitszeitliste[\"aktuell\"][\"saldoTotal\"].' Stunden.</div><br/>';\r\n    $html .=  '<div class=\"fliestxt\"><br/>\r\nBitte beachten Sie, dass das Arbeitszeitkonto auf 36 Stunden begrenzt ist.<br/>\r\nDarüber hinaus geleistete Stunden können nicht in das Arbeitszeitkonto übernommen werden.<br/><br/>\r\n\r\nFür weitere Fragen stehe ich Ihnen gerne zur Verfügung.<br/><br/>\r\nMit freundlichen Grüßen<br/>\r\nMartin Holle, Prodekan LS\r\n</div>';\r\n    $html .=  '<img width=\"300px;\" alt=\"sign-holle\" src=\"img/sign-holle.png\">';\r\n    return $html;\r\n}\r\n\r\nfunction generateLuETable( $dozent )\r\n{ $r = '<div style=\"position: absolute; left:50%; top:100px; padding: 10px;  border: solid black 1px; font-family: Arial, sans-serif;  font-size  : 12px; background-color: #FAFAFA; display: none;\"  id=\"livesearch\"> </div>\r\n<table  style=\"width: 100%;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px;\">\r\n              <td  style=\"width: 60%\"                  > Titel der Veranstaltung / Entlastung </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > Gruppe </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > SWS </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > Anteil </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > LVS </td></tr> ' ;\r\n  \r\n  foreach ( $dozent[\"aktuell\"][\"veranstaltungsliste\"]   as $t )\r\n  {  $r .= '<tr> <td class=\"taL\" id = \"'. strtr( $t[ \"Fach\" ], ' ', '_' ) .'\" onClick = \"me( this );\" oninput = \"showResult(this, \\'' .  $t[ \"Fach\" ] .'\\' ); \"  >' . $t[ \"FachL\"] . ' (' .  $t[ \"Fach\" ] .') </td>\r\n                 <td class=\"taC\">' . $t[ \"Studiengang\"] . '</td>\r\n                 <td class=\"taC\">' . number_format( $t[ \"SWS\" ], 2 ) . '</td>\r\n                 \r\n                 <td class=\"taC\">' . $t[ \"Anteil\"] . '% </td>\r\n                 <td class=\"taC\">' . number_format( $t[ \"LVS\" ], 2 ) . '</td></tr> '    ;\r\n  }\r\n  \r\n  foreach ( $dozent['aktuell']['entlastungsliste']  as $t )\r\n  { $r .= '<tr> <td colspan=\"4\">' . $t[ \"auslastungsGrund\" ] . '</td>  <td  class=\"taC\">' .  number_format( $t[ \"LVS\" ], 2) . '</td></tr> ' ;\r\n  }\r\n  \r\n  $r .= '<tr><td colspan=\"4\" class=\"sum\"> Summe der Lehrveranstaltungen und Entlastungen: </td>  <td class=\"taC sum\"> ' .    number_format($dozent[\"aktuell\"][ \"dozentLV\" ][ \"summeLuE\" ]  , 2) . '</td></tr>' ;\r\n  $r .= '</table>';\r\n  return $r;\r\n}\r\n\r\nfunction generateBeteiligung( $dozent )\r\n{\r\n   # deb($dozent['aktuell']['beteiligung'],1);\r\n    $r = '';\r\n\r\n    $r =   '<br/<br/<br/<br/><div class=\"fliestxt\">Anteile bei Veranstaltung mit Beteiligung</div><br/>';\r\n\r\n    foreach ( $dozent[\"aktuell\"][\"beteiligung\"]   as $beteiligung )\r\n    {  $anteilGesamt = 0;\r\n        $LVSGesamt = 0;\r\n        #deb($beteiligung);\r\n        $r .= '<table  style=\"width: 100%;\" >';\r\n        $r .='<tr style=\"background-color: #cccccc; padding:5px;\">\r\n              <td  style=\"width: 60%\"                   >  ' . $beteiligung[0][ \"FachL\"] . ' (' .  $beteiligung[0][ \"Fach\" ] .')  ' . $beteiligung[0][ \"Studiengang\"] . ' </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > Anteil </td>\r\n              <td  style=\"width: 10%;\" class=\"taC head\" > LVS </td></tr> ' ;\r\n\r\n        foreach ($beteiligung as $t )\r\n        {\r\n            $anteilGesamt += $t[ \"Anteil\"];\r\n            $LVSGesamt += $t[ \"LVS\"];\r\n        $r .= '<tr> <td class=\"taL\" id = \"'. strtr( $t[ \"Fach\" ], ' ', '_' ) .'\" onClick = \"me( this );\" oninput = \"showResult(this, \\'' .  $t[ \"Fach\" ] .'\\' ); \"  >  '. $t['dozent'][ \"Vorname\" ]. '  '. $t['dozent'][ \"Name\" ]  .'  </td>\r\n                 \r\n                 <td class=\"taC\">' . $t[ \"Anteil\"] . '% </td>\r\n                 <td class=\"taC\">' . number_format( $t[ \"LVS\" ], 2 ) . '</td></tr> '    ;\r\n\r\n        }\r\n\r\n        $r .= '<tr><td  class=\"sum\"> Summe der Anteile und LVS: </td>  <td class=\"taC sum\"> ' .    $anteilGesamt . '%</td><td class=\"taC sum\">' .  number_format($LVSGesamt , 2) . '</td></tr>' ;\r\n        $r .= '</table><br>';\r\n    }\r\n    return $r;\r\n}\r\n\r\nfunction generateAZKTTable( $dozent )\r\n{ $r = '<table  style=\"width: 100%;\" >';\r\n  $r .='<tr style=\"background-color: #cccccc; padding:5px;\">\r\n            <td  style=\"width: 20%\"  class=\"taC head\" >Semester</td>\r\n            <td  style=\"width: 15%;\" class=\"taR head\" >Stunden</td>\r\n            <td  style=\"width: 15%;\" class=\"taR head\" >Pflicht</td>\r\n            <td  style=\"width: 15%;\" class=\"taR head\" >Saldo</td>\r\n            <td  style=\"width: 15%;\" class=\"taR head\" >Summe</td>\r\n            <td  style=\"width: 20%;\" class=\"taR head\" >Kommentar</td>\r\n          </tr> ' ;\r\n\r\n  unset( $dozent[ 'aktuell' ] );\r\n  foreach ( $dozent   as $dVL )\r\n  {\r\n    $d = $dVL['dozentLV'];\r\n    $r .= '<tr> \r\n           <td class=\"taC\">' .                $d[ \"Jahr\"       ]   . ' (' .  $d[ \"Semester\" ] .')  </td>\r\n           <td class=\"taR\">' . number_format( $d[ \"summeLuE\"   ] ,2 ) . ' </td>\r\n           <td class=\"taR\">' . number_format( $d[ \"Pflicht\"    ] ,2 ) . ' </td>\r\n           <td class=\"taR\">' . number_format( $d[ \"saldo\"      ] ,2 ) . ' </td>\r\n           <td class=\"taR\">' . number_format( $d[ \"saldoTotal\" ] ,2 )  . ' </td>\r\n           <td class=\"taR\">' .                $d[ \"Kommentar\"  ] . ' </td>\r\n           </tr> '    ;\r\n    }\r\n    $r .= '</table>';\r\n    return $r;\r\n}\r\n\r\nfunction renderMainSide()\r\n{\r\n$html ='\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n<style>\r\n.dropbtn\r\n{ font-family: Arial, sans-serif;\r\n  background-color: #EFEFEF;\r\n  color: white;\r\n  font-size: 22px;\r\n}\r\n\r\n.dropdown \r\n{ position: relative;\r\n  display: inline-block;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 25px;\r\n  margin-left: 15px;\r\n}\r\n\r\n.dropdown-content \r\n{ display: none;\r\n  position: absolute;\r\n  background-color: #f1f1f1;\r\n  min-width: 160px;\r\n  box-shadow: 0 8px 16px 0 rgba( 0 , 0 , 0 , 0.2 );\r\n  z-index: 1;\r\n}\r\n\r\n.dropdown-content a \r\n{ font-family: Arial, sans-serif;\r\n  color: black;\r\n  padding: 12px 16px;\r\n  text-decoration: none;\r\n  display: block;\r\n}\r\n\r\n.dropdown-content a:hover         { background-color: #ddd    ; }\r\n.dropdown:hover .dropdown-content { display         : block   ; }\r\n.dropdown:hover .dropbtn          { background-color: #EEEEEE ; }\r\n\r\n</style>\r\n</head>\r\n<body style=\"background-color:white;\">\r\n\r\n<div class=\"dropdown\" style=\"width: 49%;\">\r\n  <div class=\"dropbtn\"  id=\"Button2\" >Basis Tabellen</div>\r\n  <div class=\"dropdown-content\">\r\n    <a href=\"index.php?action=edoz\"  target=\"rechts\"  onclick=\"document.querySelector(\\'#Button2\\').innerHTML = \\'Dozenten\\'   ; \">Dozenten     </a>\r\n    <a href=\"index.php?action=ef\"    target=\"rechts\"  onclick=\"document.querySelector(\\'#Button2\\').innerHTML = \\'Fach\\'       ; \">Fach         </a>\r\n    <a href=\"index.php?action=esg\"   target=\"rechts\"  onclick=\"document.querySelector(\\'#Button2\\').innerHTML = \\'Studiengang\\'; \">Studiengang  </a>\r\n    <a href=\"index.php?action=edep\"  target=\"rechts\"  onclick=\"document.querySelector(\\'#Button2\\').innerHTML = \\'Department\\' ; \">Department   </a>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"dropdown\" >\r\n  <div class=\"dropbtn\" id=\"Button1\">2023 S</div>\r\n  <div class=\"dropdown-content\">\r\n    <a href=\"index.php?action=ad&jahr=2024&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2024 S\\'; \">2024 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2024&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2024 W\\'; \">2024 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2023&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2023 S\\'; \">2023 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2022&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2022 W\\';\" >2022 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2022&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2022 S\\';\" >2022 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2021&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2021 W\\';\" >2021 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2021&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2021 S\\';\" >2021 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2020&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2020 W\\';\" >2020 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2020&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2020 S\\';\" >2020 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2019&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2019 W\\';\" >2019 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2019&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2019 S\\';\" >2019 S</a>\r\n    <a href=\"index.php?action=ad&jahr=2018&semester=W\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2018 W\\';\" >2018 W</a>\r\n    <a href=\"index.php?action=ad&jahr=2018&semester=S\"  target=\"links\" onclick=\"document.querySelector(\\'#Button1\\').innerHTML = \\'2018 S\\';\" >2018 S</a>\r\n  </div>\r\n</div>\r\n\r\n';\r\n  $html .= '<iframe style=\"position: absolute; top:40px; left: 50%; height: calc(100% - 50px) ; width: calc(50% - 20px); border: 1px black solid;\"   name=\"links\" src=\"index.php?action=ad\"></iframe>';\r\n  $html .= '<iframe style=\"position: absolute; top:40px; left:10px; height: calc(100% - 50px) ; width: calc(50% - 20px); border: 1px black solid;\"   name=\"rechts\" src=\"index.php?action=ss\"                     ></iframe>';\r\n  $html .= '</body></html>';\r\n  echo $html;\r\n}\r\n\r\nfunction getRenderSplashscreen()\r\n{\r\n$html ='\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\r\n</head>\r\n<body style=\"background-color:white;\">\r\n\r\n<style> \r\n.object-fit   \r\n{ width: 400px; height: 300px; margin: 4em auto;  border:1px solid green;\r\n  position: absolute; left: 50%; top: 50%;  -webkit-transform: translate(-50%, -50%); transform: translate(-50%, -50%); \r\n} \r\n.object-fit img { object-fit: cover; width:  100%; height: 100%;}  </style>\r\n<div class=\"object-fit\" style=\"text-align:center;\"> <img \r\nsrc=\"img/splashscreen.png\" alt=\"splashscreen\"> </div>\r\n</body></html>';\r\n\r\necho $html;\r\n}\r\n\r\nfunction getRenderLoginscreen()\r\n{\r\n$html ='\r\n<!DOCTYPE html>\r\n<html lang=\"de\" >\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<title>Login Form</title>\r\n<style>\r\n@import url(\"https://fonts.googleapis.com/css?family=Raleway:400,700\");\r\n*, *:before, *:after\r\n{ box-sizing: border-box;\r\n}\r\n\r\nbody\r\n{ min-height: 100vh;\r\n  font-family: \"Raleway\", sans-serif;\r\n}\r\n\r\n.container\r\n{ position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.container:hover .top:before, .container:hover .top:after, .container:hover .bottom:before, .container:hover .bottom:after, .container:active .top:before, .container:active .top:after, .container:active .bottom:before, .container:active .bottom:after\r\n{ margin-left: 200px;\r\n  transform-origin: -200px 50%;\r\n  transition-delay: 0s;\r\n}\r\n\r\n.container:hover .center, .container:active .center\r\n{ opacity: 1;\r\n  transition-delay: 0.2s;\r\n}\r\n\r\n.top:before, .top:after, .bottom:before, .bottom:after\r\n{ content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  width: 200vmax;\r\n  height: 200vmax;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-top: -100vmax;\r\n  transform-origin: 0 50%;\r\n  transition: all 0.5s cubic-bezier(0.445, 0.05, 0, 1);\r\n  z-index: 10;\r\n  opacity: 0.65;\r\n  transition-delay: 0.2s;\r\n}\r\n\r\n.top:before\r\n{ transform: rotate(45deg);\r\n  background: #000000;\r\n}\r\n.top:after\r\n{ transform: rotate(135deg);\r\n  background: #aaa;\r\n}\r\n\r\n.bottom:before\r\n{ transform: rotate(-45deg);\r\n  background: #ccc;\r\n}\r\n\r\n.bottom:after\r\n{ transform: rotate(-135deg);\r\n  background: #eee;\r\n}\r\n\r\n.center\r\n{ position: absolute;\r\n  width: 400px;\r\n  height: 400px;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin-left: -200px;\r\n  margin-top: -200px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 30px;\r\n  opacity: 0;\r\n  transition: all 0.5s cubic-bezier(0.445, 0.05, 0, 1);\r\n  transition-delay: 0s;\r\n  color: #333;\r\n}\r\n\r\n.center input\r\n{ width: 100%;\r\n  padding: 15px;\r\n  margin: 5px;\r\n  border-radius: 1px;\r\n  border: 1px solid #ccc;\r\n  font-family: inherit;\r\n}\r\n</style>\r\n<script>\r\n  window.console = window.console || function(t) {};\r\n</script>\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js\"></script>\r\n</head>\r\n<body translate=\"no\">\r\n  <div class=\"container\" onclick=\"onclick\">\r\n  <div class=\"top\"></div>\r\n  <div class=\"bottom\"></div>\r\n  <div class=\"center\">\r\n    <h2>Bitte einloggen</h2>\r\n    <input type=\"email\" placeholder=\"email\"/>\r\n    <input type=\"password\" placeholder=\"password\"/>\r\n    <h2>&nbsp;</h2>\r\n  </div>\r\n</div>\r\n</body>\r\n/html>\r\n';\r\necho $html;\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/render.lib.php b/lib/render.lib.php
--- a/lib/render.lib.php	(revision 2e8721c4603c05242172d3e00f7e30644d1f797e)
+++ b/lib/render.lib.php	(date 1737016789928)
@@ -133,8 +133,8 @@
 }
 
 function renderArbeitszeitkonto( $db, $dozentKurz, $jahr, $semester )
-{ $arbeitszeitliste =  getArbeitszeitlisteDB( $db, $dozentKurz, $jahr, $semester );
-  mysqli_close($db);
+{ $arbeitszeitliste  =  getArbeitszeitlisteDB( $db, $dozentKurz, $jahr, $semester );
+  mysqli_close( $db );
   return renderZeitkontoTotalProf( $arbeitszeitliste );
 }
 
Index: lib/tools.lib.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once('lib/TCPDF/tcpdf.php');\r\n$htmlheader = '\r\n<html>\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n<meta charset=\"UTF-8\">\r\n<title> title </title>\r\n\r\n<style type=\"text/css\">\r\ntd, th \r\n{ color      : #000000;\r\n  padding    : 6px;\r\n  font-family: Arial, sans-serif;\r\n  font-size  : 12px;\r\n  border-bottom: 1px solid gray;\r\n}\r\n\r\ntd.head \r\n{ color: white;\r\n  font-weight: bold;\r\n  background-color:  darkgrey;\r\n}\r\n\r\ntd.sum\r\n{ color      : #000000;\r\n  background-color: #eeeeee;\r\n}\r\n\r\ntd.sal \r\n{ color      : #000000;\r\n  background-color: lightyellow;\r\n}\r\n\r\n.taL { text-align: left  ; }\r\n.taR { text-align: right ; }\r\n.taC { text-align: center; }\r\n\r\n.headertxt \r\n{ text-align: left;\r\n  font-family: Arial, sans-serif;\r\n  font-size  : 12px;\r\n  height: 110px;\r\n  line-height: 95%;\r\n}\r\n\r\n.datetxt \r\n{ text-align: right;\r\n  font-family: Arial, sans-serif;\r\n  font-size  : 14px;\r\n}\r\n\r\n.betrefftxt\r\n { text-align: left;\r\n   font-family: Arial, sans-serif;\r\n   font-size  : 18px;\r\n   font-weight: bold;\r\n   margin-bottom: 20px;\r\n   margin-top: 45px;\r\n}\r\n\r\n.fliestxt\r\n{ text-align: left;\r\n  font-family: Arial, sans-serif;\r\n  font-size  : 12px;\r\n  line-height: 150%;\r\n}\r\n</style>\r\n\r\n <script>\r\n\r\nvar oldInnerHTML;\r\nfunction closeResult( h )\r\n{         document.getElementById( h ).innerHTML    = window.oldInnerHTML; \r\n  var d = document.getElementById(\"livesearch\");\r\n  d.style.display = \"none\";\r\n}\r\n \r\nfunction showResult( str , h )\r\n{ y_pos = getYPos(str);\r\n  x_pos = 10;\r\n       \r\n  y_pos += 30;\r\n \r\n  var d = document.getElementById(\"livesearch\");\r\n  d.style.position = \"absolute\";\r\n  d.style.left     = x_pos+\"px\";\r\n  d.style.top      = y_pos+\"px\"; \r\n  d.style.display  = \"block\";\r\n           \r\n  str = str.innerHTML;  \r\n  str.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n  \r\n  if (str.length == 0)\r\n  { document.getElementById( \"livesearch\" ).innerHTML    = \"\";\r\n    document.getElementById( \"livesearch\" ).style.border = \"0px\";\r\n    return;\r\n  }\r\n  var xmlhttp = new XMLHttpRequest();\r\n  xmlhttp.onreadystatechange = function()\r\n  { if ( this.readyState == 4 && this.status == 200 )\r\n    { document.getElementById( \"livesearch\" ).innerHTML    = this.responseText   ;\r\n      document.getElementById( \"livesearch\" ).style.border = \"1px solid #A5ACB2\" ;\r\n    }\r\n  }\r\n  \r\n  xmlhttp.open( \"GET\" , \"livesearch.php?q=\" + str + \"&h=\" + h , true );\r\n  xmlhttp.send();\r\n}\r\n \r\nfunction  getYPos(x)\r\n{ let elem = document.querySelector( \"#\" + x.id );\r\n  let rect = elem.getBoundingClientRect();\r\n  return  rect[ \"top\" ] ;\r\n}\r\n\r\nfunction me( x )  // -- Make Element editable\r\n{ x.contentEditable = \"true\";\r\n  \r\n  str = x.innerHTML;  \r\n  str.replace(/<\\/?[^>]+(>|$)/g, \"\");   \r\n  window.oldInnerHTML = str;\r\n}\r\n\r\nfunction setV2DB( t , k, v , c , i , n = 0 )   // -- Set Value to DataBase\r\n{ if ( v.innerHTML.length == 0 )\r\n  { v.innerHTML    = \"\";\r\n    v.style.border = \"0px\";\r\n    return;\r\n  }\r\n  var xmlhttp = new XMLHttpRequest();\r\n  xmlhttp.open( \"GET\" , \"setV2DB.php?t=\" + t  + \"&k=\" + k  + \"&v=\" + v.innerHTML + \"&c=\" + c + \"&i=\" + i   , true );\r\n  xmlhttp.send();\r\n }\r\n</script>\r\n</head>\r\n<body>\r\n';\r\n\r\n$htmlfooter = '\r\n</body>\r\n</html>\r\n';\r\n\r\n// Erstellung des PDF Dokuments\r\n\r\nfunction renderPDF($html)\r\n{\r\n $pdfName = \"DAS PDF\";\r\n \r\n $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);\r\n\r\n// Dokumenteninformationen\r\n$pdf->SetCreator(PDF_CREATOR);\r\n# $pdf->SetAuthor($pdfAuthor);\r\n# $pdf->SetTitle('Rechnung '.$rechnungs_nummer);\r\n\r\n// Header und Footer Informationen\r\n$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));\r\n$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));\r\n\r\n// Auswahl des Font\r\n$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);\r\n\r\n// Auswahl der MArgins\r\n$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);\r\n$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);\r\n$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);\r\n\r\n// Automatisches Autobreak der Seiten\r\n$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);\r\n\r\n// Image Scale\r\n$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);\r\n\r\n// Schriftart\r\n$pdf->SetFont('dejavusans', '', 10);\r\n\r\n// Neue Seite\r\n$pdf->AddPage();\r\n\r\n// Fügt den HTML Code in das PDF Dokument ein\r\n$pdf->writeHTML($html, true, false, true, false, '');\r\n\r\n//Ausgabe der PDF\r\n\r\n//Variante 1: PDF direkt an den Benutzer senden:\r\n$pdf->Output($pdfName, 'I');\r\n\r\n//Variante 2: PDF im Verzeichnis abspeichern:\r\n//$pdf->Output(dirname(__FILE__).'/'.$pdfName, 'F');\r\n//echo 'PDF herunterladen: <a href=\"'.$pdfName.'\">'.$pdfName.'</a>';\r\n}\r\n\r\n\r\nfunction getStundenbilanz($jahr, $dozentKurz , $semester, $output = 'html')\r\n{ global $htmlheader;\r\n  $db = connectDB();\r\n  $html = renderStundenbilanz( $db, $dozentKurz, $jahr, $semester );\r\n  $html = $htmlheader . $html;\r\n  error_reporting(0 );\r\n  \r\n  if ( $output == 'ohne' )\r\n  {  return $html;\r\n  }\r\n  else if ( $output == 'pdf' )\r\n  {  renderPDF( $html );\r\n  }\r\n  else\r\n  { echo $html;\r\n  }\r\n}\r\n\r\nfunction getStandArbeitszeitkonto($jahr, $dozentKurz , $semester, $output = 'html')\r\n{ global $htmlheader;\r\n  $db = connectDB();\r\n  $html = renderArbeitszeitkonto( $db, $dozentKurz, $jahr, $semester );\r\n  $html = $htmlheader . $html;\r\n  error_reporting(0 );\r\n\r\n  if ( $output == 'ohne' )\r\n  {  return $html;\r\n  }\r\n  else if ( $output == 'pdf' )\r\n  { renderPDF( $html );\r\n  }\r\n  else\r\n  { echo $html;\r\n  }\r\n}\r\n\r\nfunction getRenderAlleDozenten()\r\n{ global $htmlheader, $htmlfooter;\r\n  $html = '';\r\n  $db = connectDB();\r\n  $html = renderDozentenListe( $db );\r\n  $html = $htmlheader . $html . $htmlfooter;\r\n  echo $html;\r\n}\r\n\r\nfunction getRenderAlleDozentenSem()\r\n{ global $htmlheader, $htmlfooter;\r\n  $html = '';\r\n  $db = connectDB();\r\n  $html = renderDozentenListeSem( $db );\r\n  $html = $htmlheader . $html . $htmlfooter;\r\n#  error_reporting(0 );\r\n  echo $html;\r\n}\r\n\r\nfunction getRenderAlleFaecher()\r\n{\r\n  global $htmlheader, $htmlfooter;\r\n  $header = $htmlheader;\r\n  $html = '';\r\n  $db = connectDB();\r\n  $html = renderFaecherListe( $db );\r\n  $html = $htmlheader . $html . $htmlfooter;\r\n#  error_reporting(0 );\r\n  echo $html;\r\n}\r\n\r\nfunction getRenderAlleDepartments()\r\n{\r\n    global $htmlheader, $htmlfooter;\r\n  $html = '';\r\n  $db = connectDB();\r\n  $html = renderDepartmentListe( $db );\r\n  $html = $htmlheader . $html . $htmlfooter;\r\n#  error_reporting(0 );\r\n   echo $html;\r\n}\r\n\r\nfunction getRenderAlleStudiengang()\r\n{\r\n    global $htmlheader, $htmlfooter;\r\n  $html = '';\r\n  $db = connectDB();\r\n  $html = renderStudiengangListe( $db );\r\n    $html = $htmlheader . $html . $htmlfooter;\r\n#  error_reporting(0 );\r\n  echo $html;\r\n  \r\n}\r\n\r\n\r\nfunction checkGetInput()\r\n{\r\n    if (isset( $_GET[ 'jahr'       ]  ) ) { $g[ 'jahr'       ]  =  $_GET[ 'jahr'       ] ; } else  { $g[ 'jahr'       ]  =  0; }\r\n    if (isset( $_GET[ 'semester'   ]  ) ) { $g[ 'semester'   ]  =  $_GET[ 'semester'   ] ; } else  { $g[ 'semester'   ]  =  0; }\r\n    if (isset( $_GET[ 'dozentKurz' ]  ) ) { $g[ 'dozentKurz' ]  =  $_GET[ 'dozentKurz' ] ; } else  { $g[ 'dozentKurz' ]  =  0; }\r\n    if (isset( $_GET[ 'output'     ]  ) ) { $g[ 'output'     ]  =  $_GET[ 'output'     ] ; } else  { $g[ 'output'     ]  =  0; }\r\n\r\n    $_SESSION[ 'aktuell' ][ 'Jahr'     ] = $g[ 'jahr'        ];\r\n    $_SESSION[ 'aktuell' ][ 'Semester' ] = $g[ 'semester'    ];\r\n\r\n    return $g;\r\n}\r\n\r\n\r\nfunction deb($con, $kill = false)\r\n{ echo \"<pre>\";\r\n    print_r($con);\r\n    echo \"</pre>\";\r\n    if($kill) {die();}\r\n}\r\n\r\n\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/lib/tools.lib.php b/lib/tools.lib.php
--- a/lib/tools.lib.php	(revision 2e8721c4603c05242172d3e00f7e30644d1f797e)
+++ b/lib/tools.lib.php	(date 1737019804457)
@@ -287,13 +287,13 @@
 
 function checkGetInput()
 {
-    if (isset( $_GET[ 'jahr'       ]  ) ) { $g[ 'jahr'       ]  =  $_GET[ 'jahr'       ] ; } else  { $g[ 'jahr'       ]  =  0; }
-    if (isset( $_GET[ 'semester'   ]  ) ) { $g[ 'semester'   ]  =  $_GET[ 'semester'   ] ; } else  { $g[ 'semester'   ]  =  0; }
+    if (isset( $_GET[ 'jahr'       ]  ) ) { $g[ 'jahr'       ]  =  $_GET[ 'jahr'       ] ; $_SESSION[ 'aktuell' ][ 'Jahr'     ] = $g[ 'jahr'        ]; } else  {  }
+    if (isset( $_GET[ 'semester'   ]  ) ) { $g[ 'semester'   ]  =  $_GET[ 'semester'   ] ; $_SESSION[ 'aktuell' ][ 'Semester' ] = $g[ 'semester'    ]; } else  {  }
     if (isset( $_GET[ 'dozentKurz' ]  ) ) { $g[ 'dozentKurz' ]  =  $_GET[ 'dozentKurz' ] ; } else  { $g[ 'dozentKurz' ]  =  0; }
     if (isset( $_GET[ 'output'     ]  ) ) { $g[ 'output'     ]  =  $_GET[ 'output'     ] ; } else  { $g[ 'output'     ]  =  0; }
 
-    $_SESSION[ 'aktuell' ][ 'Jahr'     ] = $g[ 'jahr'        ];
-    $_SESSION[ 'aktuell' ][ 'Semester' ] = $g[ 'semester'    ];
+
+
 
     return $g;
 }
Index: index.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nsession_start();\r\ninclude_once( \"lib/tools.lib.php\"  );\r\ninclude_once( \"lib/db.lib.php\"     );\r\ninclude_once( \"lib/render.lib.php\" );\r\n\r\nif ( isset( $_GET[ 'action'      ]  ) )\r\n{\r\nif( $_GET[ 'action' ] == 'sb' )  ## -- aktuelle Stundenbilanz eines Dozierenden --\r\n{ $g = checkGetInput();\r\n  getStundenbilanz( $g['jahr'], $g['dozentKurz'] , $g['semester'], $g['output'] );\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'azkt' )  ## -- aktuelle Stand des Arbeistzeitkontos eines Dozierenden --\r\n{ $g = checkGetInput();\r\n  getStandArbeitszeitkonto(  $g['jahr'], $g['dozentKurz'] , $g['semester'], $g['output']  );\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'ad' )  ## -- Hauptliste -- Liste mit allen Dozierenden --\r\n{ $g = checkGetInput();\r\n  getRenderAlleDozentenSem();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'ls' )   ## -- Spash Screen  --\r\n{  getRenderLoginscreen();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'ss' )   ## -- Spash Screen  --\r\n{  getRenderSplashscreen();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'edoz' )  ## -- Basisliste mit allen Dozierenden --\r\n{    getRenderAlleDozenten();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'ef' )    ## -- Basisliste mit allen Fächern --\r\n{  getRenderAlleFaecher();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'edep' )  ## -- Basisliste mit allen Departments --\r\n{  getRenderAlleDepartments();\r\n}\r\n\r\nif( $_GET[ 'action' ] == 'esg' )   ## -- Basisliste mit allen Studiengängen --\r\n{  getRenderAlleStudiengang();\r\n}\r\n\r\n}\r\n\r\nelse\r\n{  renderMainSide();                  ## -- Startseite mit Menu und Content-Iframes --\r\n}\r\n\r\n/*\r\nfunction checkGetInput()\r\n{\r\n    if (isset( $_GET[ 'jahr'       ]  ) ) { $g[ 'jahr'       ]  =  $_GET[ 'jahr'       ] ; } else  { $g[ 'jahr'       ]  =  0; }\r\n    if (isset( $_GET[ 'semester'   ]  ) ) { $g[ 'semester'   ]  =  $_GET[ 'semester'   ] ; } else  { $g[ 'semester'   ]  =  0; }\r\n    if (isset( $_GET[ 'dozentKurz' ]  ) ) { $g[ 'dozentKurz' ]  =  $_GET[ 'dozentKurz' ] ; } else  { $g[ 'dozentKurz' ]  =  0; }\r\n    if (isset( $_GET[ 'output'     ]  ) ) { $g[ 'output'     ]  =  $_GET[ 'output'     ] ; } else  { $g[ 'output'     ]  =  0; }\r\n\r\n    $_SESSION[ 'aktuell' ][ 'Jahr'     ] = $g[ 'jahr'        ];\r\n    $_SESSION[ 'aktuell' ][ 'Semester' ] = $g[ 'semester'    ];\r\n\r\n    return $g;\r\n}\r\n*/\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/index.php b/index.php
--- a/index.php	(revision 2e8721c4603c05242172d3e00f7e30644d1f797e)
+++ b/index.php	(date 1737022239269)
@@ -1,5 +1,6 @@
 <?php
 session_start();
+
 include_once( "lib/tools.lib.php"  );
 include_once( "lib/db.lib.php"     );
 include_once( "lib/render.lib.php" );
